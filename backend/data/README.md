# ðŸ“§ Email Examples Data

This directory contains sample emails for Few-Shot learning.

## ðŸ“‚ Directory Structure

```
data/
â”œâ”€â”€ sample_emails/          # Put your .eml or .html files here
â”‚   â”œâ”€â”€ email_001.eml
â”‚   â”œâ”€â”€ email_002.eml
â”‚   â””â”€â”€ ...
â”œâ”€â”€ parsed_examples.json    # Auto-generated by parse_emails.py
â””â”€â”€ README.md              # This file
```

---

## ðŸš€ Quick Start

### Step 1: Download Emails from Gmail

**Option A: Manual Download (5 minutes)**

1. Open Gmail in your browser
2. For each email you want to use as an example:
   - Open the email
   - Click the three dots (â‹®) in the top-right
   - Select **"Download message"** or **"Show original"** â†’ **"Download original"**
   - Save as `.eml` file
3. Move all `.eml` files to `backend/data/sample_emails/`

**Option B: Export as HTML**

1. Open the email in Gmail
2. Click **"Show original"**
3. Copy the HTML source
4. Save as `.html` file in `backend/data/sample_emails/`

---

### Step 2: Install Dependencies

```bash
cd backend
source .venv-mosaico/bin/activate  # or your venv
pip install beautifulsoup4 lxml
```

---

### Step 3: Run the Parser

```bash
cd backend
python scripts/parse_emails.py
```

**Expected Output:**
```
INFO:__main__:Found 18 email files
INFO:__main__:Parsing: email_001.eml
INFO:__main__:Parsing: email_002.eml
...
INFO:__main__:âœ… Successfully parsed 18 emails
INFO:__main__:ðŸ“„ Output saved to: backend/data/parsed_examples.json

============================================================
PARSING SUMMARY
============================================================

ðŸ“§ email_001.eml
   Subject: Exclusive Spring Collection - Just For You
   Pre-header: Discover the season's must-have pieces...
   Body sections: 3
   CTAs: 4
   Images: 6
   CTA examples:
      - Shop Now
      - Discover the Collection
      - Explore New Arrivals
...
```

---

## ðŸ“„ Output Format (`parsed_examples.json`)

```json
[
  {
    "filename": "email_001.eml",
    "subject": "Exclusive Spring Collection - Just For You",
    "preheader": "Discover the season's must-have pieces",
    "body_sections": [
      "Spring is here, and so is our newest collection...",
      "From elegant dresses to statement accessories..."
    ],
    "ctas": [
      {
        "text": "Shop Now",
        "url": "https://example.com/spring-collection",
        "type": "button"
      },
      {
        "text": "Discover More",
        "url": "https://example.com/discover",
        "type": "link"
      }
    ],
    "images": [
      {
        "src": "https://example.com/images/banner.jpg",
        "alt": "Spring Collection 2025",
        "width": "600",
        "height": "400"
      }
    ]
  }
]
```

---

## ðŸ”§ Troubleshooting

### "No email files found"
- Make sure your `.eml` or `.html` files are in `backend/data/sample_emails/`
- Check file extensions (must be `.eml`, `.html`, or `.htm`)

### "No HTML content found"
- Some `.eml` files only have plain text
- Try downloading as "Show original" instead

### "Module not found: bs4"
```bash
pip install beautifulsoup4 lxml
```

---

## ðŸ“Š What Happens Next?

Once you have `parsed_examples.json`, we will:

1. **Create Few-Shot Examples** from your real email data
2. **Inject them into AI prompts** for better, brand-consistent generation
3. **Test CTA variety** with 20-30 real examples

---

## ðŸŽ¯ Next Steps

After parsing:
```bash
# Check the output
cat backend/data/parsed_examples.json | jq '.[0]'  # View first email

# Count CTAs
cat backend/data/parsed_examples.json | jq '[.[].ctas[].text]' | wc -l

# See all unique CTA texts
cat backend/data/parsed_examples.json | jq '[.[].ctas[].text] | unique'
```

Then we'll integrate this into the generation pipeline! ðŸš€

